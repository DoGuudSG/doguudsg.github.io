<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/@rive-app/canvas@1.0.97/rive.min.js"></script>
    <style>
      #canvasElement {
        height: 100%;
        padding: 0;
        margin: auto;
        display: block;
      }
    </style>
  </head>
  <body>
   <canvas id="canvasElement" width="640" height="960"></canvas>
   <script>
      var skinValue = "0";
      queryHandler();

      const r = new rive.Rive({
        src: 'https://divine-breeze-6813.on.fleek.co/static/media/all_nfts.b2071db9dda8edbced95.riv',
        canvas: canvasElement,
        autoplay: true,
        artboard: 'NFT Artboard',
        stateMachines: 'Misc',
        fit: rive.Fit.cover,
        onLoad: (_) => {
          setSkin();
        },
      });

      function setSkin() {
        // Get the inputs via the name of the state machine
        const inputs = r.stateMachineInputs('Misc');
        // Find the input you want to set a value for, or trigger
        const skinID = inputs.find(i => i.name === 'Skin ID');
        skinID.value = skinValue; // canvasElement.dataset['skin'];
      }
        
      async function queryHandler() {
        const params = new Proxy(new URLSearchParams(window.location.search), {
          get: (searchParams, prop) => searchParams.get(prop),
        });
        // Get the value of "some_key" in eg "https://example.com/?some_key=some_value"
        let id = params.id; // "some_value"
        var reg = new RegExp('^[0-9]*$');
        console.log('id', id);
        if (reg.test(id)) {
          skinValue = Number(id);
          console.log('skinValue', skinValue);
          setSkin();
        }
      }
    </script>
  </head>
  <body>
  </body>
</html>